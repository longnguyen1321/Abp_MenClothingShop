
<div class="card">
    <div class="card-header">
        <div class = "row">
            <div class = "col col-md-12">
                <h1 class = "card-title">
                    {{ '::Menu:Suppliers' | abpLocalization }}
                </h1>
            </div>
        </div>
    </div>
    <div class="card-body overflow-auto">
        <div class="supplier-list">
            <mat-tab-group>
                <mat-tab> 
                    <ng-template mat-tab-label>
                        <span class="tabCSS">Danh sách nhà cung cấp</span>
                    </ng-template>
                    <div class="text-end col">
                        <div class = "text-lg-end pt-2">
                            <button *abpPermission="'MenClothingShop.Clothes.Create'" id="create" class="btn btn-success" type ="button" (click)="createSupplier()">
                                <i class="fa fa-plus mr-1"></i>
                                <span>{{ "::CreateSupplier" | abpLocalization}}</span>
                            </button>
                        </div>
                    </div>
                    <h3>Danh sách nhà cung cấp</h3>
                    <ngx-datatable [rows]="supplierList.items" [count]="supplierList.totalCount" [selectionType]="'single'" default>  
                        <ngx-datatable-column [name] = "'::MaNCC' | abpLocalization" prop="id"></ngx-datatable-column>
                        <ngx-datatable-column [name] = "'::TenNCC' | abpLocalization" prop="tenNCC"></ngx-datatable-column>
                        <ngx-datatable-column [name] = "'::DiaChiNCC' | abpLocalization" prop = "diaChiNCC"></ngx-datatable-column>
                        <ngx-datatable-column [name] = "'::LienLacNCC' | abpLocalization" prop = "lienLacNCC"></ngx-datatable-column>
                        <ngx-datatable-column [name] = "'::Menu:Suppliers' | abpLocalization">
                            <ng-template let-row="row" ngx-datatable-cell-template>
                                <button id="displaySupplierBtn" class="btn btn-info" *abpPermission="'MenClothingShop.Clothes.Edit'" (click)="showSupplierClotheAndImport(row.id, this)">
                                    Hiển thị
                                </button>
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column [name]="'::Actions' | abpLocalization" [maxWidth]="150" [sortable]="false">
                            <ng-template let-row="row" ngx-datatable-cell-template>
                                <div ngbDropdown container="body" class="d-inline-block">
                                    <button
                                        class="btn btn-primary btn-sm dropdown-toggle"
                                        data-toggle="dropdown"
                                        aria-haspopup="true"
                                        ngbDropdownToggle
                                    >
                                        <i class="fa fa-cog mr-1"></i>{{ '::Actions' | abpLocalization }}
                                    </button>
                                    <div ngbDropdownMenu>    
                                        <button ngbDropdownItem class="btn btn-warning" style=" width: 100%; border-radius: 8px; margin-bottom: 10px;" *abpPermission="'MenClothingShop.Clothes.Edit'" (click)="editSupplier(row.id)">
                                            {{ '::UpdateSupplier' | abpLocalization }}
                                        </button>                
                                        <button ngbDropdownItem class="btn btn-danger" style=" width: 100%; border-radius: 8px;" *abpPermission="'MenClothingShop.Clothes.Delete'" (click)="deleteSupplier(row.id)">
                                            {{ '::DeleteSuppllier' | abpLocalization }}
                                        </button>    
                                    </div>
                                </div>
                            </ng-template>
                        </ngx-datatable-column>
                    </ngx-datatable>
                </mat-tab>
                <mat-tab label="Danh sách mặt hàng"> 
                    <ng-template mat-tab-label>
                        <span class="tabCSS">Danh sách mặt hàng</span>
                    </ng-template>
                    <ng-template matTabContent>
                        <ngx-datatable [rows]="clotheList.items" [count]="clotheList.totalCount" default>  
                            <ngx-datatable-column [name] = "'::MaMH' | abpLocalization" prop="id"></ngx-datatable-column>
                            <ngx-datatable-column [name] = "'::TenMH' | abpLocalization" prop="tenMH"></ngx-datatable-column>
                            <ngx-datatable-column [name] = "'::SizeMH' | abpLocalization" prop="sizeMH"></ngx-datatable-column>
                        </ngx-datatable>
                    </ng-template>
                </mat-tab>
                <mat-tab label="Danh sách phiếu nhập">  
                    <ng-template mat-tab-label>
                        <span class="tabCSS">Danh sách phiếu nhập</span>
                    </ng-template>
                    <ng-template matTabContent>
                        <ngx-datatable [rows]="importList.items" [count]="importList.totalCount" default>  
                            <ngx-datatable-column [name] = "'::MaPN' | abpLocalization" prop="id"></ngx-datatable-column>
                            <ngx-datatable-column [name] = "'::NgayNhap' | abpLocalization" prop="ngayNhap"></ngx-datatable-column>
                        </ngx-datatable>
                    </ng-template>
                </mat-tab>
            </mat-tab-group>                    
        </div>
    </div>
</div>

<abp-modal [(visible)]="isModalOpen" class="w-full h-full">
    <div class="w-full h-full">
        <ng-template #abpHeader>
            <h2>{{ (selectedSupplier.id ? '::UpdateSupplier' : '::CreateSupplier') | abpLocalization }}</h2>
          </ng-template>
        
          <ng-template #abpBody> 
              <div class="clotheSections d-flex flex-column">
                  <div class="clotheSectionItem flex-fill">
                      <h3>Danh sách mặt hàng</h3>
                      <ngx-datatable [rows]="clotheSelectionList.items" [count]="clotheSelectionList.totalCount" [list]="list" default class="clotheSelectionListTable">
                          <ngx-datatable-column [name] = "'::MaMH' | abpLocalization" prop="id"></ngx-datatable-column>
                          <ngx-datatable-column [name] = "'::TenMH' | abpLocalization" prop="tenMH"></ngx-datatable-column>
                          <ngx-datatable-column [name] = "'::SizeMH' | abpLocalization" prop = "sizeMH"></ngx-datatable-column>
                          <ngx-datatable-column [name]="'::Action' | abpLocalization" [maxWidth]="150" [sortable]="false">
                              <ng-template let-row="row" ngx-datatable-cell-template>
                                  <button class="smallBtn" (click)="addClothe(row)">
                                      {{ '::Add' | abpLocalization }}
                                  </button>
                              </ng-template>
                          </ngx-datatable-column>
                          <ngx-datatable-column [name]="'::Action' | abpLocalization" [maxWidth]="150" [sortable]="false">
                              <ng-template let-row="row" ngx-datatable-cell-template>
                                  <button class="smallBtn" (click)="deleteClothe(row)">
                                      {{ '::Delete' | abpLocalization }}
                                  </button>
                              </ng-template>
                          </ngx-datatable-column>
                      </ngx-datatable> 
                  </div>
                  <div class="clotheSectionItem flex-fill">
                      <h3>Danh sách mặt hàng đã chọn</h3>
                      <ngx-datatable [rows]="selectedClotheList.items" [count]="selectedClotheList.totalCount" [list]="list" default class="clotheSelectionListTable">
                          <ngx-datatable-column [name] = "'::MaMH' | abpLocalization" prop="id"></ngx-datatable-column>
                          <ngx-datatable-column [name] = "'::TenMH' | abpLocalization" prop="tenMH"></ngx-datatable-column>
                          <ngx-datatable-column [name] = "'::SizeMH' | abpLocalization" prop = "sizeMH"></ngx-datatable-column>
                          <ngx-datatable-column [name]="'::Action' | abpLocalization" [maxWidth]="150" [sortable]="false">
                              <ng-template let-row="row" ngx-datatable-cell-template>
                                  <button class="smallBtn" (click)="deleteClothe(row)">
                                      {{ '::Delete' | abpLocalization }}
                                  </button>
                              </ng-template>
                          </ngx-datatable-column>
                      </ngx-datatable> 
                  </div>
              </div>
              <form [formGroup]="form" (ngSubmit)="save()">
                  <div class="form-group">
                      <label for="supplier-name">Tên</label><span> * </span>
                      <input type="text" id="supplier-name" class="form-control" formControlName="tenNCC" />
                  </div>
                  <div class="form-group">
                      <label for="supplier-address">Địa chỉ</label><span> * </span>
                      <input type="text" id="supplier-address" class="form-control" formControlName="diaChiNCC" />
                  </div>
                  <div class="form-group">
                      <label for="supplier-contact">Liên lạc</label><span> * </span>
                      <input type="text" id="supplier-contact" class="form-control" formControlName="lienLacNCC" />
                  </div>
              </form>
          </ng-template>
      
          <ng-template #abpFooter>
              <button type="btn btn" class="btn btn-secondary" (click)="closeModel()">
                {{ '::Close' | abpLocalization }}
              </button>
        
              <button class="btn btn-primary" (click)="save()" [disabled]="form.invalid">
                {{ ( '::Save') | abpLocalization }}
              </button>
          </ng-template>
    </div>
    
</abp-modal>


